# {{ ansible_managed }}
# Snapper config for {{ snapper_config_name }}

SUBVOLUME="/"
FSTYPE="btrfs"

# Snapshot creation
ALLOW_GROUPS="wheel"
ALLOW_USERS="{{ username }}"
SYNC_ACL="yes"

# Cleanup algorithms
NUMBER_CLEANUP="yes"
NUMBER_MIN_AGE="1800"
NUMBER_LIMIT="{{ snapper_snapshot_limit }}"
NUMBER_LIMIT_IMPORTANT="10"

# Timeline snapshots
TIMELINE_CREATE="{{ 'yes' if snapper_timeline_create else 'no' }}"
TIMELINE_CLEANUP="{{ 'yes' if snapper_timeline_cleanup else 'no' }}"
TIMELINE_MIN_AGE="1800"
TIMELINE_LIMIT_HOURLY="5"
TIMELINE_LIMIT_DAILY="7"
TIMELINE_LIMIT_WEEKLY="0"
TIMELINE_LIMIT_MONTHLY="0"
TIMELINE_LIMIT_YEARLY="0"

# Empty pre-post cleanup
EMPTY_PRE_POST_CLEANUP="yes"
EMPTY_PRE_POST_MIN_AGE="1800"
